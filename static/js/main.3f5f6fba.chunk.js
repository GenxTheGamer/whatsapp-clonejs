(this.webpackJsonpwhatsapp=this.webpackJsonpwhatsapp||[]).push([[0],{70:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},82:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},86:function(e,t,c){"use strict";c.r(t);var a=c(2),j=c(28),s=c.n(j),n=(c(70),c(16)),i=c(34),r=c(11),u=(c(71),c(106)),o=c(100),d=(c(72),c(44)),l=c.n(d),O=c(31),M=O.a.initializeApp({apiKey:"AIzaSyDEVIrfVPvtv2OzfhKL_0ea_OIlk5-2BWA",authDomain:"whatsapp-clonejs-2f7e2.firebaseapp.com",projectId:"whatsapp-clonejs-2f7e2",storageBucket:"whatsapp-clonejs-2f7e2.appspot.com",messagingSenderId:"729445530169",appId:"1:729445530169:web:09900ec89f9be4b1146be8",measurementId:"G-LG73TX0HBS"}).firestore(),N=O.a.auth(),b=new O.a.auth.GoogleAuthProvider,h=M,x=c(101),L=c(102),m=c(103),S=c(104),D=c(4),p=Object(a.createContext)(),g=function(e){var t=e.reducer,c=e.initialState,j=e.children;return Object(D.jsx)(p.Provider,{value:Object(a.useReducer)(t,c),children:j})},I=function(){return Object(a.useContext)(p)};var f=function(){var e,t,c=Object(a.useState)(""),j=Object(n.a)(c,2),s=j[0],i=j[1],d=Object(a.useState)(""),M=Object(n.a)(d,2),N=M[0],b=M[1],p=Object(r.f)().roomId,g=Object(a.useState)(""),f=Object(n.a)(g,2),y=f[0],v=f[1],T=Object(a.useState)([]),A=Object(n.a)(T,2),E=A[0],z=A[1],k=I(),_=Object(n.a)(k,2),C=_[0].user;return _[1],Object(a.useEffect)((function(){p&&(h.collection("rooms").doc(p).onSnapshot((function(e){return v(e.data().name)})),h.collection("rooms").doc(p).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return z(e.docs.map((function(e){return e.data()})))})))}),[p]),Object(a.useEffect)((function(){b(Math.floor(5e3*Math.random()))}),[p]),Object(D.jsxs)("div",{className:"chat",children:[Object(D.jsxs)("div",{className:"chat__header",children:[Object(D.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(N,".svg")}),Object(D.jsxs)("div",{className:"chat__headerInfo",children:[Object(D.jsx)("h3",{children:y}),Object(D.jsxs)("p",{children:["last Seen"," ",new Date(null===(e=E[E.length-1])||void 0===e||null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()]})]}),Object(D.jsxs)("div",{className:"chat__headerRight",children:[Object(D.jsx)(o.a,{children:Object(D.jsx)(x.a,{})}),Object(D.jsx)(o.a,{children:Object(D.jsx)(L.a,{})}),Object(D.jsx)(o.a,{children:Object(D.jsx)(l.a,{})})]})]}),Object(D.jsx)("div",{className:"chat__body",children:E.map((function(e){var t;return Object(D.jsxs)("p",{className:"chat__message ".concat(e.name===C.displayName&"chat__receiver"),children:[Object(D.jsx)("span",{className:"chat__name",children:e.name}),e.message,Object(D.jsx)("span",{className:"chat__timestamp",children:new Date(null===(t=e.timestamp)||void 0===t?void 0:t.toDate()).toUTCString()})]})}))}),Object(D.jsxs)("div",{className:"chat__footer",children:[Object(D.jsx)(m.a,{}),Object(D.jsxs)("form",{children:[Object(D.jsx)("input",{value:s,onChange:function(e){return i(e.target.value)},placeholder:"Type a Message",type:"text"}),Object(D.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault(),console.log("You typed >>>>",s),h.collection("rooms").doc(p).collection("messages").add({message:s,name:C.displayName,timestamp:O.a.firestore.FieldValue.serverTimestamp()}),i("")},children:"Send"})]}),Object(D.jsx)(S.a,{})]})]})},y=(c(82),c(49)),v=c.n(y),T=c(48),A=c.n(T),E=c(50),z=c.n(E);c(83);var k=function(e){var t,c=e.id,j=e.name,s=e.addNewChat,r=Object(a.useState)(""),o=Object(n.a)(r,2),d=o[0],l=o[1],O=Object(a.useState)(""),M=Object(n.a)(O,2),N=M[0],b=M[1];return Object(a.useEffect)((function(){c&&h.collection("rooms").doc(c).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return b(e.docs.map((function(e){return e.data()})))}))}),[c]),Object(a.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),s?Object(D.jsx)("div",{onClick:function(){var e=prompt("Please enter name for chat");e&&h.collection("rooms").add({name:e})},className:"sidebarChat",children:Object(D.jsx)("h2",{children:"Add New Chat"})}):Object(D.jsx)(i.b,{to:"/rooms/".concat(c),children:Object(D.jsxs)("div",{className:"sidebarChat",children:[Object(D.jsx)(u.a,{src:"https://avatars.dicebear.com/api/human/".concat(d,".svg")}),Object(D.jsxs)("div",{className:"sidebarChat__info",children:[Object(D.jsx)("h2",{children:j}),Object(D.jsx)("p",{children:null===(t=N[0])||void 0===t?void 0:t.message})]})]})})};var _=function(){var e=Object(a.useState)([]),t=Object(n.a)(e,2),c=t[0],j=t[1],s=I(),i=Object(n.a)(s,2),r=i[0].user;return i[1],Object(a.useEffect)((function(){var e=h.collection("rooms").onSnapshot((function(e){return j(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}));return function(){e()}}),[]),Object(D.jsxs)("div",{className:"sidebar",children:[Object(D.jsxs)("div",{className:"sidebar__header",children:[Object(D.jsx)(u.a,{src:null===r||void 0===r?void 0:r.photoURL}),Object(D.jsxs)("div",{className:"sidebar__headerRight",children:[Object(D.jsx)(o.a,{children:Object(D.jsx)(A.a,{})}),Object(D.jsx)(o.a,{children:Object(D.jsx)(v.a,{})}),Object(D.jsx)(o.a,{children:Object(D.jsx)(l.a,{})})]})]}),Object(D.jsxs)("div",{className:"sidebar__search",children:[Object(D.jsx)(z.a,{}),Object(D.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]}),Object(D.jsxs)("div",{className:"sidebar__chats",children:[Object(D.jsx)(k,{addNewChat:!0}),c.map((function(e){return Object(D.jsx)(k,{id:e.id,name:e.data.name},e.key)}))]})]})},C=c(61),w=c(105),Q=(c(84),c(53)),U="SET_USER",Y=function(e,t){switch(console.log(t),t.type){case U:return Object(Q.a)(Object(Q.a)({},e),{},{user:t.user});default:return e}};var P=function(){var e=I(),t=Object(n.a)(e,2);Object(C.a)(t[0]);var c=t[1];return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"login",children:Object(D.jsxs)("div",{className:"login__container",children:[Object(D.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNLjA1NyAyNGwxLjY4Ny02LjE2M2MtMS4wNDEtMS44MDQtMS41ODgtMy44NDktMS41ODctNS45NDYuMDAzLTYuNTU2IDUuMzM4LTExLjg5MSAxMS44OTMtMTEuODkxIDMuMTgxLjAwMSA2LjE2NyAxLjI0IDguNDEzIDMuNDg4IDIuMjQ1IDIuMjQ4IDMuNDgxIDUuMjM2IDMuNDggOC40MTQtLjAwMyA2LjU1Ny01LjMzOCAxMS44OTItMTEuODkzIDExLjg5Mi0xLjk5LS4wMDEtMy45NTEtLjUtNS42ODgtMS40NDhsLTYuMzA1IDEuNjU0em02LjU5Ny0zLjgwN2MxLjY3Ni45OTUgMy4yNzYgMS41OTEgNS4zOTIgMS41OTIgNS40NDggMCA5Ljg4Ni00LjQzNCA5Ljg4OS05Ljg4NS4wMDItNS40NjItNC40MTUtOS44OS05Ljg4MS05Ljg5Mi01LjQ1MiAwLTkuODg3IDQuNDM0LTkuODg5IDkuODg0LS4wMDEgMi4yMjUuNjUxIDMuODkxIDEuNzQ2IDUuNjM0bC0uOTk5IDMuNjQ4IDMuNzQyLS45ODF6bTExLjM4Ny01LjQ2NGMtLjA3NC0uMTI0LS4yNzItLjE5OC0uNTctLjM0Ny0uMjk3LS4xNDktMS43NTgtLjg2OC0yLjAzMS0uOTY3LS4yNzItLjA5OS0uNDctLjE0OS0uNjY5LjE0OS0uMTk4LjI5Ny0uNzY4Ljk2Ny0uOTQxIDEuMTY1LS4xNzMuMTk4LS4zNDcuMjIzLS42NDQuMDc0LS4yOTctLjE0OS0xLjI1NS0uNDYyLTIuMzktMS40NzUtLjg4My0uNzg4LTEuNDgtMS43NjEtMS42NTMtMi4wNTktLjE3My0uMjk3LS4wMTgtLjQ1OC4xMy0uNjA2LjEzNC0uMTMzLjI5Ny0uMzQ3LjQ0Ni0uNTIxLjE1MS0uMTcyLjItLjI5Ni4zLS40OTUuMDk5LS4xOTguMDUtLjM3Mi0uMDI1LS41MjEtLjA3NS0uMTQ4LS42NjktMS42MTEtLjkxNi0yLjIwNi0uMjQyLS41NzktLjQ4Ny0uNTAxLS42NjktLjUxbC0uNTctLjAxYy0uMTk4IDAtLjUyLjA3NC0uNzkyLjM3MnMtMS4wNCAxLjAxNi0xLjA0IDIuNDc5IDEuMDY1IDIuODc2IDEuMjEzIDMuMDc0Yy4xNDkuMTk4IDIuMDk1IDMuMiA1LjA3NiA0LjQ4Ny43MDkuMzA2IDEuMjYzLjQ4OSAxLjY5NC42MjYuNzEyLjIyNiAxLjM2LjE5NCAxLjg3Mi4xMTguNTcxLS4wODUgMS43NTgtLjcxOSAyLjAwNi0xLjQxMy4yNDgtLjY5NS4yNDgtMS4yOS4xNzMtMS40MTR6Ii8+PC9zdmc+"}),Object(D.jsx)("div",{className:"login__text",children:Object(D.jsx)("h1",{children:" Sign in to Whatsapp"})}),Object(D.jsx)(w.a,{type:"submit",onClick:function(){N.signInWithPopup(b).then((function(e){c({type:U,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign in with Google"})]})})})};var B=function(){var e=I(),t=Object(n.a)(e,2),c=t[0].user;return t[1],Object(D.jsx)("div",{className:"app",children:c?Object(D.jsx)("div",{className:"app__body",children:Object(D.jsxs)(i.a,{children:[Object(D.jsx)(_,{}),Object(D.jsxs)(r.c,{children:[Object(D.jsx)(r.a,{path:"/rooms/:roomId",children:Object(D.jsx)(f,{})}),Object(D.jsx)(r.a,{path:"/",children:Object(D.jsx)(f,{})})]})]})}):Object(D.jsx)(P,{})})};s.a.render(Object(D.jsx)(g,{initialState:{user:null},reducer:Y,children:Object(D.jsx)(B,{})}),document.getElementById("root"))}},[[86,1,2]]]);
//# sourceMappingURL=main.3f5f6fba.chunk.js.map